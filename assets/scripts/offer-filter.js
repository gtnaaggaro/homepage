$(document).ready(function () {
  var offerData = {
    CategoryOffers: [
      {
        paymentGateway: 'visa',
        Type: 'featured_Offers',
        offerViews: '24K',
        offerId: 'offer-get-10-instant-discount-on-central-20172809195255318',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/central.png',
        smallOfferImage: 'assets/images/brands/amazon.png',
        offerDesp1: 'Central Offer - Get 10% instant discount',
        offerDesp2: 'using ICICI Bank Credit or Debit Card',
        offerDesp3: 'New Line 1',
        offerDesp4: 'New Line 22',
        offerTitle: 'Central Offer - Get 10% instant discount',
        offerPromoCode: '10%',
        offerPromoCodeText: 'Get Discount',
        brandId: 'ionwxemiv',
        offerBrand: 'ionwxemiv:/Offer/Brands/Others',
        brandName: 'amazon',
        brandLink: '/offers/central-discount-offer.page?',
        categoryName: 'mobileRecharge',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'itvc3fk5:hnoicbfm:hrczol97:hwlnzvxs',
        Livesite: 'j7iv9tdo',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Apparel',
        startDate: '2020-05-04 19:50:00',
        endDate: '2020-09-20 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-debit-card/central-discount-offer-t.jpg',
      },
      {
        offerViews: '19K',
        paymentGateway: 'mastercard',
        Type: 'featured_Offers',
        offerId: 'offer-get-75-cashback-on-lg-products-20170112155620592',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/LG.png',
        smallOfferImage: 'assets/images/brands/myntra.png',
        offerDesp1: 'Get up to 12.5% cashback on LG products',
        offerDesp2: 'cashback on LG products',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Get up to 12.5% cashback on LG products',
        offerPromoCode: 'up to 12.5%',
        offerPromoCodeText: 'Get Cashback',
        brandId: 'j9e5feqo',
        offerBrand: 'j9e5feqo:/Offer/Brands/LG',
        brandName: 'myntra',
        brandLink: '/offers/lg-product-offer.page?',
        categoryName: 'lifestyle',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'itvc3fk5:hwlnzvxs:jbd6190g:hlzbyxzc',
        Livesite: 'j9e5fc3r',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Electronics',
        startDate: '2019-10-03 15:43:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-card/lg-product-offer-t.jpg',
      },
      {
        offerViews: '19K',
        paymentGateway: 'rupay',
        Type: 'featured_Offers',
        offerId: 'offer-first-swaggy-order-get-20-discount-offer-20172403171934752',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/swiggy.png',
        smallOfferImage: 'assets/images/brands/mmt-1.png',
        offerDesp1: 'Swiggy Dining Offer - Get 15% Off',
        offerDesp2: 'Using ICICI Bank Credit and Debit Card',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Swiggy Offer - Get 15% Discount on Food Order',
        offerPromoCode: 'ICICICT75',
        offerPromoCodeText: 'Use Code',
        brandId: 'j0rn2rx0',
        offerBrand: 'j0rn2rx0:/Offer/Brands/Swiggy',
        brandName: 'amazon',
        brandLink: '/offers/swiggy-discount-offer.page?',
        categoryName: 'electronics',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'hwlnzvxs:hnoicbfm:hsd1esrv',
        Livesite: 'j0lw1i8b',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Food',
        startDate: '2018-05-16 05:15:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-debit-card/swiggy/swiggy-discount-offer-t.jpg',
      },
      {
        offerViews: '9.5K',
        paymentGateway: 'upi',
        Type: 'featured_Offers',
        offerId: 'offer-trendy-wednesdays-myntra-offer-20161807185142627',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/EDD.png',
        smallOfferImage: 'assets/images/brands/tata-cliq.png',
        offerDesp1: 'Everyday Delights Trendy Wednesdays Offer',
        offerDesp2: 'Use ICICI Bank Credit/Debit Card or Pockets',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Everyday Delights Trendy Wednesdays Offer',
        offerPromoCode: '10%',
        offerPromoCodeText: 'Get additional',
        brandId: 'ionwxbrn',
        offerBrand: 'ionwxbrn:/Offer/Brands/Flipkart',
        brandName: 'tata',
        brandLink: '/offers/trendy-wednesday-offer.page?',
        categoryName: 'dining',
        categoryLink: '/offers/categories/everyday-delights.page?',
        discount: '/offers/categories/everyday-delights.page?',
        Category: 'hnoicbfm:hrczol97:hwlnzvxs:iqjfbij1:i5rm18ly',
        Livesite: 'iqrxpnj6',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Ecom',
        startDate: '2020-07-29 18:45:00',
        endDate: '2020-10-07 23:59:00',
        Image: '/managed-assets/images/offer-zone/debit-card/trendy-wednesday-offer-new-t.jpg',
      },
      {
        offerViews: '9.3K',
        paymentGateway: 'paypal',
        Type: 'featured_Offers',
        offerId: 'offer-zee5-offer-get-25-off-on-zee5-subscription-plans--20201902154701638',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/zee5.png',
        smallOfferImage: 'assets/images/brands/amazon.png',
        offerDesp1: 'Get 25% off on ZEE5 subscription plans',
        offerDesp2: 'Pay using ICICI Bank Credit or Debit Card',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'ZEE5 Offer - Get 25% off on ZEE5 subscription plans',
        offerPromoCode: '25%',
        offerPromoCodeText: 'Get Discount',
        brandId: 'ionwxemip',
        offerBrand: 'ionwxemip:/Offer/Brands/Others',
        brandName: 'acer',
        brandLink: '/offers/zee5-subscription-offer.page?',
        categoryName: 'gifting',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'hsocur2n:hwlnzvxs:hnoicbfm',
        Livesite: 'k6kkexfw',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Movie',
        startDate: '2020-02-18 15:43:00',
        endDate: '2020-11-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-debit-card/zee5-subscription-offer-t.jpg',
      },
      {
        offerViews: '7.6K',
        paymentGateway: 'paytm',
        Type: 'featured_Offers',
        offerId: 'offer-exclusive-discounts-at-1mg-20192905155525099',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/1mg.png',
        smallOfferImage: 'assets/images/brands/myntra.png',
        offerDesp1: 'Get up to 40% discount at 1mg',
        offerDesp2: 'Pay using ICICI Bank Net Banking',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Exclusive discounts at 1mg',
        offerPromoCode: 'ICICI',
        offerPromoCodeText: 'Promo Code',
        brandId: 'ionwxemia',
        offerBrand: 'ionwxemia:/Offer/Brands/Others',
        brandName: 'apple',
        brandLink: '/offers/1mg-offer.page?',
        categoryName: 'gifting',
        categoryLink: '/offers/categories/net-banking.page?',
        discount: '/offers/categories/net-banking.page?',
        Category: 'jncpoxds:hnoicbfk:k9dxtivc',
        Livesite: 'jw51nybw',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Ecom',
        startDate: '2020-02-26 15:33:00',
        endDate: '2020-11-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/net-banking/1mg-offer-t.jpg',
      },
      {
        offerViews: '5.8K',
        paymentGateway: 'visa',
        Type: 'featured_Offers',
        offerId: 'offer--20181012152616249',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/docsapp.png',
        smallOfferImage: 'assets/images/brands/amazon.png',
        offerDesp1: 'Get One Online Doctor Consultation',
        offerDesp2: 'Pay using ICICI Bank Credit and Debit Card',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle:
          'Get the first Online Doctor Consultation at Rs.11 and further up to 60 % Off on Unlimited Online-consultation through Membership',
        offerPromoCode: 'ICICILAB',
        offerPromoCodeText: 'Promo Code',
        brandId: 'ionwxemi',
        offerBrand: 'ionwxemi:/Offer/Brands/Others',
        brandName: 'amazon',
        brandLink: '/offers/docsapp-offer.page?',
        categoryName: 'dining',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'hnoicbfm:hnoicbfk:htvdkezo:hwlnzvxs',
        Livesite: 'jp52ihqe',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Ecom',
        startDate: '2020-04-14 15:32:00',
        endDate: '2021-03-31 23:59:00',
        Image: 'managed-assets/images/offer-zone/credit-card/DocApp-offer-banner-t.jpg',
      },
      {
        offerViews: '3.4K',
        paymentGateway: 'mastercard',
        Type: 'featured_Offers',
        offerId: 'offer-15-off-on-minimum-transaction-value-of-rs15000-20170506171718585',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/byjus.png',
        smallOfferImage: 'assets/images/brands/myntra.png',
        offerDesp1: 'Avail of no cost* EMI on BYJUâ€™s courses',
        offerDesp2: 'Pay using ICICI Bank Credit Card',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: "BYJU'S Offer",
        offerPromoCode: '7.74%',
        offerPromoCodeText: 'Get discount on 12 EMI',
        brandId: 'hnoicbfp',
        offerBrand: 'hnoicbfp:/Offer/Product/Other Offers',
        brandName: 'myntra',
        brandLink: '/offers/byjus-offer.page?',
        categoryName: 'lifestyle',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'hwlnzvxs:hsocur2p',
        Livesite: 'j3jrlhka',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Ecom',
        startDate: '2020-06-17 16:43:00',
        endDate: '2021-03-31 23:59:00',
        Image: '/managed-assets/images/offer-zone/net-banking/byju-offer-t.jpg',
      },
      {
        offerViews: '2.5K',
        paymentGateway: 'paypal',
        Type: 'featured_Offers',
        offerId: 'offer-everyday-delights-travel-mondays-offer-20162107192637747',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/EDD.png',
        smallOfferImage: 'assets/images/brands/mmt-1.png',
        offerDesp1: 'MakeMyTrip Mondays Cashback Offer',
        offerDesp2: 'Use ICICI Bank Internet Banking or Cards',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'MakeMyTrip App Mondays Cashback Offer',
        offerPromoCode: 'FLYMON',
        offerPromoCodeText: 'Use Promo Code',
        brandId: 'ionwxdf9',
        offerBrand: 'ionwxdf9:/Offer/Brands/MakeMyTrip',
        brandName: 'amazon',
        brandLink: '/offers/travel-monday-offer.page?',
        categoryName: 'electronics',
        categoryLink: '/offers/categories/everyday-delights.page?',
        discount: '/offers/categories/everyday-delights.page?',
        Category: 'hnoicbfm:hrczogih:htvdkezo:hqj1vrj0:hwlnzvxs:iqjfbij1:jbd6190g:jbd61w08:i5rm18ly',
        Livesite: 'iqw7q3pg',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Travel',
        startDate: '2020-07-31 11:20:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/debit-card/travel-monday-offer-t.jpg',
      },
      {
        offerViews: '2.3K',
        paymentGateway: 'upi',
        Type: 'featured_Offers',
        offerId: 'offer-super-saver-weekends-swiggy-offer-20180208182712567',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/freedom-week.png',
        smallOfferImage: 'assets/images/brands/tata-cliq.png',
        offerDesp1: 'Get 15% discount on food order on Swiggy',
        offerDesp2: 'Pay using ICICI Bank Net Banking',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Get 15% discount on food order on Swiggy',
        offerPromoCode: 'ICICINB100',
        offerPromoCodeText: 'Promo Code',
        brandId: 'jp52j0ao',
        offerBrand: 'jp52j0ao:/Offer/Brands/Swiggy',
        brandName: 'amazon',
        brandLink: '/offers/swiggy-weekend-offer.page?',
        categoryName: 'dining',
        categoryLink: '/offers/categories/independence-day-special-offers.page?',
        discount: '/offers/categories/independence-day-special-offers.page?',
        Category: 'jncpoxds:hnoicbfk:jyeemujq:jk0sgjsv:kdab1hrc',
        Livesite: 'jk0sgk6h',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Food',
        startDate: '2020-07-16 12:11:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/net-banking/Swiggy-Net-Banking-t.jpg',
      },
      {
        offerViews: '1.8K',
        paymentGateway: 'paypal',
        Type: 'featured_Offers',
        offerId: 'offer-get-flat-rs-800-cashback-at-paytm-flights-20170612182707558',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/paytm-mall.jpg',
        smallOfferImage: 'assets/images/brands/mmt-1.png',
        offerDesp1: 'Get 10% cashback at Paytm mall',
        offerDesp2: 'Pay using ICICI Bank Net Banking',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Get up to 10% cashback at Paytm mall',
        offerPromoCode: '10%',
        offerPromoCodeText: 'Get Cashback',
        brandId: 'jbd61bqg',
        offerBrand: 'jbd61bqg:/Offer/Brands/paytm',
        brandName: 'airtel',
        brandLink: '/offers/paytm-mall-offer.page?',
        categoryName: 'gifting',
        categoryLink: '/offers/categories/net-banking.page?',
        discount: '/offers/categories/net-banking.page?',
        Category: 'hwlnzvxs:hnoicbfm:hm1uihm9',
        Livesite: 'j9e5fezp',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Ecom',
        startDate: '2020-08-09 18:22:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-debit-card/paytm-flight-offer-t.jpg',
      },
    ],
  };
  var popularOfferData = {
    PopularOffers: [
      {
        paymentGateway: 'visa',
        Type: 'featured_Offers',
        offerViews: '24K',
        offerId: 'offer-get-10-instant-discount-on-central-20172809195255318',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/central.png',
        smallOfferImage: 'assets/images/brands/amazon.png',
        offerDesp1: 'Central Offer - Get 10% instant discount',
        offerDesp2: 'using ICICI Bank Credit or Debit Card',
        offerDesp3: 'New Line 1',
        offerDesp4: 'New Line 22',
        offerTitle: 'Central Offer - Get 10% instant discount - 3',
        offerPromoCode: '10%',
        offerPromoCodeText: 'Get Discount',
        brandId: 'ionwxemi',
        offerBrand: 'ionwxemi:/Offer/Brands/Others',
        brandName: 'amazon',
        brandLink: '/offers/central-discount-offer.page?',
        categoryName: 'mobileRecharge',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'itvc3fk5:hnoicbfm:hrczol97:hwlnzvxs',
        Livesite: 'j7iv9tdo',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Apparel',
        startDate: '2020-05-04 19:50:00',
        endDate: '2020-09-20 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-debit-card/central-discount-offer-t.jpg',
      },
      {
        offerViews: '19K',
        paymentGateway: 'mastercard',
        Type: 'featured_Offers',
        offerId: 'offer-get-75-cashback-on-lg-products-20170112155620592',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/LG.png',
        smallOfferImage: 'assets/images/brands/myntra.png',
        offerDesp1: 'Get up to 12.5% cashback on LG products',
        offerDesp2: 'cashback on LG products',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Get up to 12.5% cashback on LG products - 2',
        offerPromoCode: 'up to 12.5%',
        offerPromoCodeText: 'Get Cashback',
        brandId: 'j9e5feqo',
        offerBrand: 'j9e5feqo:/Offer/Brands/LG',
        brandName: 'myntra',
        brandLink: '/offers/lg-product-offer.page?',
        categoryName: 'lifestyle',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'itvc3fk5:hwlnzvxs:jbd6190g:hlzbyxzc',
        Livesite: 'j9e5fc3r',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Electronics',
        startDate: '2019-10-03 15:43:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-card/lg-product-offer-t.jpg',
      },
      {
        offerViews: '19K',
        paymentGateway: 'rupay',
        Type: 'featured_Offers',
        offerId: 'offer-first-swaggy-order-get-20-discount-offer-20172403171934752',
        offerImage: '/managed-assets/images/offer-zone/brand-logos/swiggy.png',
        smallOfferImage: 'assets/images/brands/mmt-1.png',
        offerDesp1: 'Swiggy Dining Offer - Get 15% Off',
        offerDesp2: 'Using ICICI Bank Credit and Debit Card',
        offerDesp3: '',
        offerDesp4: '',
        offerTitle: 'Swiggy Offer - Get 15% Discount on Food Order - 1',
        offerPromoCode: 'ICICICT75',
        offerPromoCodeText: 'Use Code',
        brandId: 'j0rn2rx0',
        offerBrand: 'j0rn2rx0:/Offer/Brands/Swiggy',
        brandName: 'amazon',
        brandLink: '/offers/swiggy-discount-offer.page?',
        categoryName: 'electronics',
        categoryLink: '/offers/categories/credit-card.page?',
        discount: '/offers/categories/credit-card.page?',
        Category: 'hwlnzvxs:hnoicbfm:hsd1esrv',
        Livesite: 'j0lw1i8b',
        UnnicaOfferShow: '0',
        MCCMCategory: 'Food',
        startDate: '2018-05-16 05:15:00',
        endDate: '2020-09-30 23:59:00',
        Image: '/managed-assets/images/offer-zone/credit-debit-card/swiggy/swiggy-discount-offer-t.jpg',
      },
    ],
  };
  let tempArray = [];
  let filters = [];

  // load all CategoryOffers from offerData json on document ready
  sortCards(offerData['CategoryOffers']);

  //Filter CategoryOffers from search box input
  $('.filter-content .search-box-area input').focus(function () {
    $('.filter-content .search-box-area input').val('');
  });
  $('.filter-content .search-box-area input').keyup(function () {
    var inputText = $(this)[0].value;
    if (inputText.length > 0) {
      var titleArray = searchItems(offerData['CategoryOffers'], 'offerTitle', inputText);
      var descArray = searchItems(offerData['CategoryOffers'], 'offerDesp1', inputText);
      var brandArray = searchItems(offerData['CategoryOffers'], 'brandName', inputText);
      var resultArray = titleArray.concat(descArray, brandArray);
      // code change 13/01/2020
      resultArray = uniqueData(resultArray, 'offerId');
      // end code change 13/01/2020
      sortCards(resultArray);
    } else sortCards(offerData['CategoryOffers']);
  });

  //Filter CategoryOffers form sidebar selection category
  /*$(".sidebar-content .sb-categories li div").click(function (event) {
    if (event.target !== this) return; // Do nothing
    renderOfferCards($(this).parent().attr("id"));
  });*/
  $('.sb-categories #all').click(function () {
    renderOfferCards('all');
  });

  // offer-type chanage event filter
  /* Code update start 05/03/2021 */
  $("input[name='offer-type']").click(function () {
    if($(this).hasClass('current-active')){
        return false;
    } 
    $("input[name='offer-type']").removeClass('current-active')
    $(this).addClass('current-active')
    if (this.value == 'polular_Offers') {
      sortCards(popularOfferData['PopularOffers']);
    } else {
      renderOfferCards(this.value);
    }
  });
  /* Code update end 05/03/2021 */

  //Filter CategoryOffers form sidebar selection sub-category
  $(document).on('click', '.sidebar-content .checkbox-list input', function () {
    $('.filter-content .filter-cat').show();
    $('.filter-content .filter-cat').addClass('active');
    if ($(window).width() > 991) {
      createFilterArray();
    }

    //commented code change 16-12-2020

    // $("html, body").animate({
    //   scrollTop: $("#filterSection").offset().top - $("header").height(),
    // });

    //commented code change end 16-12-2020
  });

  // code change 30-11-2020
  $(document).on('click', '.sidebar-content .checkbox-popup-list input', function () {
    $('.filter-content .filter-cat').show();
    $('.filter-content .filter-cat').addClass('active');
  });

  $('.brand-poupup-bottom .apply').click(function () {
    createFilterArray();
    $('html, body').animate({
      scrollTop: $('#filterSection').offset().top - $('header').height(),
    });
  });
  // end code change 30-11-2020
  function createFilterArray() {
    filters = [];
    $.each($('.sidebar-content .checkbox-list input:checked'), function () {
      if (filters.indexOf($(this).val()) == -1) filters.push($(this).val());
    });
    $.each($('.sidebar-content .checkbox-popup-list input:checked'), function () {
      console.log($(this).val());
      if (filters.indexOf($(this).val()) == -1) filters.push($(this).val());
    });
    if (filters.length == 0) {
      if ($(window).width() <= 991) {
        $('.feature-offer-section').show();
        $('.announcement-section').show();
        $('.filter-inner-container').removeClass('active');
        $('.filter-top').removeClass('filter-selected');
        $('.filter-top').removeClass('filter-sticky');
      }
      $('.filter-content .filter-cat').hide();
      $('.filter-content .filter-cat').removeClass('active');
      sortCards(offerData['CategoryOffers']);
      generateFilterTags('#offerFilterTags', '');
    } else {
      generateFilterTags('#offerFilterTags', filters);
      renderOfferCards();
    }
  }

  //Filter and render reuired CategoryOffers only
  function renderOfferCards(filterId) {
    tempArray = [];
    if (filterId == 'all') {
      sortCards(offerData['CategoryOffers']);
    } else {
      for (let index = 0; index < offerData['CategoryOffers'].length; index++) {
        var element = offerData['CategoryOffers'][index];
        if (element['categoryName'] == filterId || element['Type'] == filterId) {
          tempArray.push(element);
        }
        if (
          filters.indexOf(element['categoryName']) != -1 ||
          filters.indexOf(element['brandName']) != -1 ||
          filters.indexOf(element['paymentGateway']) != -1
        ) {
          tempArray.push(element);
        }
      }
      sortCards(tempArray);
    }
  }

  /**
   *Filter close remove from list
   */
  $(document).on('click', '.filter-cat img', function () {
    var removefilterId = $(this).closest('span').attr('data-filter');
    $('[value=' + removefilterId + ']').prop('checked', false);
    $('[value=' + removefilterId + ']')
      .closest('li')
      .removeClass('active');
    createFilterArray();
  });
  $(document).on('click', '.filter-cat .filter-clear', function () {
    $('.sidebar-content .checkbox-list input').prop('checked', false);
    $('.sidebar-content .checkbox-list input').closest('li').removeClass('active');
    createFilterArray();
  });

  // code change 18-12-2020
  $('.sidebar-header .close').click(function () {
    $('.filter-content .filter-cat').hide();
    $('.filter-content .filter-cat').removeClass('active');
    $('.sidebar-content .checkbox-list input').prop('checked', false);
    $('.sidebar-content .checkbox-list input').closest('li').removeClass('active');
    $(this).parent().removeClass('active');
  });
  // end code change 18-12-2020
  // code change 30-11-2020
  $('.sidebar-footer .apply').click(function () {
    setTimeout(function () {
      createFilterArray();
    }, 500);
  });
  // end code change 30-11-2020

  //Sorting CategoryOffers click event
  $('.sort-dropdown .dropdown-inner li').click(function () {
    if (tempArray.length > 0) sortCards(tempArray);
    else sortCards(offerData['CategoryOffers']);
  });

  //Sorting cards functions provide sort Id
  function sortCards(dataArray) {
    var sortId = $('.sort-dropdown .dropdown-inner li.active').attr('id');
    if (sortId == 'latest') {
      dataArray.sort(custom_sort_date);
      dataArray.reverse();
    } else if (sortId == 'oldest') {
      dataArray.sort(custom_sort_date);
    } else if (sortId == 'viewed') {
      dataArray.sort(custom_sort_view);
      dataArray.reverse();
    } else if (sortId == 'liked') {
      dataArray.sort(custom_sort_like);
      dataArray.reverse();
    }
    generateOfferListItems(dataArray);
  }
});

function generateOfferListItems(offerData) {
  let html = '',
    offerCardGroupCount = 6;
  for (let index = 0; index < offerData.length; index++) {
    if (index % offerCardGroupCount == 0) {
      if (index >= offerCardGroupCount) html += '<div class="offer-list hidden-card">';
      else html += '<div class="offer-list">';
    }

    html += generateHTML(
      offerData[index]['smallOfferImage'],
      offerData[index]['endDate'],
      offerData[index]['offerTitle'],
      offerData[index]['offerDesp1'] +
        ' ' +
        offerData[index]['offerDesp2'] +
        ' ' +
        offerData[index]['offerDesp3'] +
        ' ' +
        offerData[index]['offerDesp4'],
      offerData[index]['offerViews']
    );

    if (index % offerCardGroupCount == offerCardGroupCount - 1) {
      html += '</div>';
    }
  }

  //Display result
  if (html.length > 0) {
    $('#offerListWrapper').html(html);
    $('.filter-top .sort-tools').removeClass('disable-sorting');
    getRemainingTime();
  } else {
    $('#offerListWrapper').html('<div class="no-result"></div>');
    $('.filter-top .sort-tools').addClass('disable-sorting');
  }
}
/* 18/12/2020 code update */
function generateHTML(brandIcon, remainingTime, cardTitle, cardDescription, viewCount) {
  var html =
    '<div class="offer-card"><div class="card-inner"><div class="media"><img src="' +
    brandIcon +
    '" alt="amazon"></div><div class="time"><span><img src="assets/images/icons/timer.svg" alt="time"></span><span class="remaining-time" data-time="' +
    remainingTime +
    '"></span></div><div class="content"><div class="title"> <a href="#">' +
    cardTitle +
    '</a></div><div class="description"> <a href="#">' +
    cardDescription +
    '</a></div><div class="button-group"> <a href="#" class="ic-btn">Activate now</a><a href="#" class="ic-more">Know more</a></div><div class="card-bottom"><div class="date-readtime"><span class="num-viewer">' +
    viewCount +
    '</span></div><div class="bookmark-share"><div class="bookmark"></div><div class="share"></div><div class="share-content"><div class="inner-content"><div class="share-header"><p>Share</p> <span class="close-icon"><img src="assets/images/icons/close-orange.svg" alt="fb"></span></div><ul class="share-link"><li><a href="#" target="_blank"> <span class="n-icon"><img src="assets/images/icons/video/whatsapp.svg" alt="whatsapp"></span><span class="h-icon"><img src="assets/images/icons/video/whatsapp-o.svg" alt="whatsapp"></span></a></li><li><a href="#" target="_blank"> <span class="n-icon"><img src="assets/images/icons/fb-black.svg" alt="fb"></span><span class="h-icon"><img src="assets/images/icons/fb-orange.svg" alt="fb"></span></a></li><li><a href="#" target="_blank"> <span class="n-icon"><img src="assets/images/icons/tw-black.svg" alt="tw"></span><span class="h-icon"><img src="assets/images/icons/tw-orange.svg" alt="tw"></span></a></li><li><a href="#" target="_blank"> <span class="n-icon"><img src="assets/images/icons/ln-black.svg" alt="ln"></span><span class="h-icon"><img src="assets/images/icons/ln-orange.svg" alt="ln"></span></a></li></ul><div class="youtube-text"><input type="text" name="link" value="https://youtu.be/ks...."><span>Copy</span></div></div></div></div></div></div></div></div>';

  return html;
}

function custom_sort_date(a, b) {
  return new Date(a.startDate).getTime() - new Date(b.startDate).getTime();
}
function custom_sort_view(a, b) {
  return new Date(a.offerViews).getTime() - new Date(b.offerViews).getTime();
}
function custom_sort_like(a, b) {
  return new Date(a.Likes).getTime() - new Date(b.Likes).getTime();
}

function getRemainingTime() {
  $('span.remaining-time').each(function (element) {
    var thisItem = $(this);

    // Set the date we're counting down to
    // var countDownDate = new Date($(this).attr("data-time")).getTime();

    // code changed 14/12/2020
    var countDownDate = moment($(this).attr('data-time')).valueOf();
    // end code changed 14/12/2020
    // Update the count down every 1 second
    var x = setInterval(function () {
      var now = new Date().getTime();
      var distance = countDownDate - now;
      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);

      var timeRemains = '';
      if (days > 0) timeRemains += days + 'd ';
      if (hours.toString().length == 1) hours = 0 + hours.toString();
      if (minutes.toString().length == 1) minutes = 0 + minutes.toString();
      if (seconds.toString().length == 1) seconds = 0 + seconds.toString();

      timeRemains += hours + '.' + minutes + '.' + seconds;
      thisItem.text(timeRemains);

      // If the count down is over, write some text
      if (distance < 0) {
        clearInterval(x);
        thisItem.text('EXPIRED');
      }
    }, 1000);
  });
}

// code change 13/01/2020
function uniqueData(array, property) {
  var unique = {};
  var distinct = [];
  for (var i in array) {
    if (typeof unique[array[i][property]] == 'undefined') {
      distinct.push(array[i]);
    }
    unique[array[i][property]] = 0;
  }
  console.log(distinct);
  return distinct;
}
// end code change 13/01/2020
